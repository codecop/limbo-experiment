#!/bin/bash
# https://stackoverflow.com/questions/5947742/how-to-change-the-output-color-of-echo-in-linux
./run_tests
test_result=$?
if [ "$test_result" -ne 0 ]; then
  cat log/test_result.log
  ./git_revert "failing_test"
  exit 0
fi

./check_coverage
coverage_result=$?
if [ "$coverage_result" -ne 0 ]; then
  cat log/coverage_result.log
  ./git_revert "missing_coverage"
  exit 0
fi

./check_change
size_result=$?
if [ "$size_result" -ne 0 ]; then
  ./git_revert "large_change"
  exit 0
fi

./check_flake8
flake8_result=$?
if [ "$flake8_result" -ne 0 ]; then
  ./git_revert "flake8"
  exit 0
fi

./git_commit
exit 0
